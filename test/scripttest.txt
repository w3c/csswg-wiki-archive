====== Script Tests ======

A //script test// is a test that uses JavaScript to programmatically verify one or more specific functionalities.  Unlike [[test:selftest|self-describing tests]] and [[test:reftest|reftests]], script tests do not verify rendering.

Script tests should be used to verify functionalities that do not require rendering, for example, a JavaScript API.  Script tests can also be used to add automation to [[test:reftest|reftests]] for clients that do not support [[test:reftest|reftests]].

==== Components of a Script Test ====

A script test can be written as a single file with a script block that contains the JavaScript, or the JavaScript can be contained in a separate .js file that is imported by the test file.

===== Test Harness =====

The test harness (written and maintained by James Graham) is a JavaScript file that facilitates writing test cases.  Specifically, test harness offers test authors:
  * A convenient API for making common test assertions
  * Support for testing synchronous and asynchronous DOM features in a way that promotes clear, robust, tests

Script tests written for the CSSWG //should// use test harness whenever possible.

==== Basic Usage ====

The basic usage of the test harness ([[http://w3c-test.org/resources/testharness.js|testharness.js]]) is described in the beginning of the file.

  * To use the harness, import both scripts into the test document per the script tag below. Note that an expectation is that all tests must be run-able in place in the W3C's test repository. As such, an absolute path to the script file must be used and the script file will be in resources directory at the root of the repository.

<code html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
</code>
  * Each test can have one or more asserts. Note: some prefer a test is limited to a single assert but that is not mandatory.
  * Each test is atomic in the sense that a single test has a single result (pass/fail/timeout).
  * Within each test one may have a number of asserts.
  * A test fails at the first failing assert, and the remainder of the test is (typically) not run.
  * If the file containing the tests is a HTML file with an element of id "log", this will be populated with a table containing the test results after all the tests have run.
==== Bug Reporting ====

The discussion forum for the test harness is the W3C's cross-WG [[http://lists.w3.org/Archives/Public/public-test-infra/|public-test-infra]] mail list. This list is also used to report testharness.js bugs or bugs can also be directly added to the W3C's Bugzilla: [[https://www.w3.org/Bugs/Public/describecomponents.cgi?product=Testing|Product = Testing; Component = testharness.js]] (James Graham is the "default assignee").

==== Per-Test Metadata ====