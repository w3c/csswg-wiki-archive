<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Problem - CSS Working Group Wiki (Archive)</title>
<style>
*, *::before, *::after { box-sizing: border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  max-width: 900px; margin: 0 auto; padding: 1.5em 1em; line-height: 1.6;
  color: #1f2328; background: #fff;
}
.archive-banner {
  background: #fff8c5; border: 1px solid #d4a72c; border-radius: 6px;
  padding: 0.75em 1em; margin-bottom: 1.5em; font-size: 0.9em;
}
.archive-banner strong { color: #6e5600; }
header { border-bottom: 1px solid #d1d5db; padding-bottom: 1em; margin-bottom: 1.5em; }
header h1 { margin: 0; font-size: 1.25em; }
header h1 a { color: #0366d6; text-decoration: none; }
header h1 a:hover { text-decoration: underline; }
nav { margin-top: 0.5em; font-size: 0.9em; }
nav a { color: #656d76; text-decoration: none; margin-right: 1em; }
nav a:hover { color: #0366d6; }
h1, h2, h3, h4 { color: #1f2328; margin-top: 1.5em; }
h1:first-child { margin-top: 0; }
a { color: #0366d6; }
code { background: #f6f8fa; padding: 0.15em 0.3em; border-radius: 3px; font-size: 0.9em; }
pre { background: #f6f8fa; padding: 1em; overflow: auto; border-radius: 6px; }
pre code { background: none; padding: 0; }
table { border-collapse: collapse; margin: 1em 0; }
th, td { border: 1px solid #d1d5db; padding: 0.4em 0.8em; }
th { background: #f6f8fa; }
img { max-width: 100%; }
.breadcrumb { font-size: 0.85em; color: #656d76; margin-bottom: 1em; }
.breadcrumb a { color: #656d76; }
ul, ol { padding-left: 1.5em; }
li { margin: 0.25em 0; }
.plugin_note { background: #f0f4f8; border-left: 4px solid #0366d6; padding: 0.75em 1em; margin: 1em 0; border-radius: 3px; }
abbr { text-decoration: underline dotted; cursor: help; }
@media (prefers-color-scheme: dark) {
  body { background: #0d1117; color: #e6edf3; }
  .archive-banner { background: #3d2e00; border-color: #6e5600; }
  .archive-banner strong { color: #f0c000; }
  header { border-bottom-color: #30363d; }
  header h1 a { color: #58a6ff; }
  nav a { color: #8b949e; }
  nav a:hover { color: #58a6ff; }
  h1, h2, h3, h4 { color: #e6edf3; }
  a { color: #58a6ff; }
  code, pre { background: #161b22; }
  th, td { border-color: #30363d; }
  th { background: #161b22; }
  .breadcrumb, .breadcrumb a { color: #8b949e; }
  .plugin_note { background: #161b22; border-color: #58a6ff; }
}
</style>
</head>
<body>
<div class="archive-banner">
<strong>Archive Notice:</strong> This is a read-only archive of the CSS Working Group Wiki.
The original wiki was hosted at wiki.csswg.org.
</div>
<header>
<h1><a href="/">CSS Working Group Wiki</a></h1>
<nav>
<a href="/">Home</a>
<a href="/spec/">Specs</a>
<a href="/ideas/">Ideas</a>
<a href="/test/">Testing</a>
<a href="/wiki/">About</a>
</nav>
</header>
<div class="breadcrumb"><a href="/">Home</a> / <a href="/ideas/">ideas</a> / print-backgrounds</div>
<main>
<!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><a href="#the-problem">The Problem</a></li>
<li class="level1"><a href="#possible-solutions">Possible Solutions</a><ul class="toc">
<li class="level2"><a href="#do-nothing">1. Do nothing</a></li>
<li class="level2"><a href="#honor-any-style-present-in-any-print-stylesheet">2. Honor any style present in any print stylesheet</a></li>
<li class="level2"><a href="#honor-any-style-present-in-an-explicit-print-stylesheet">3. Honor any style present in an explicit print stylesheet</a></li>
<li class="level2"><a href="#honor-any-style-if-there-is-an-explicit-print-stylesheet-present-on-the-page">4. Honor any style if there is an explicit print stylesheet present on the page</a><ul class="toc">
<li class="level3"><a href="#honor-styles-whenwith-print-color-type-set">2.1., 3.1, 4.1 Honor styles when/with print color type set</a></li>
</ul>
</li>
<li class="level2"><a href="#honor-styles-marked-as-important">5. Honor styles marked as important</a></li>
<li class="level2"><a href="#honor-styles-marked-as-printer-friendly">6. Honor styles marked as printer-friendly</a></li>
<li class="level2"><a href="#honor-styles-on-elements-with-a-new-property-set-appropriately">7. Honor styles on elements with a new property set appropriately</a><ul class="toc">
<li class="level3"><a href="#honor-styles-on-elements-with-a-new-property-set-appropriately-for-the-root-element">7.1. Honor styles on elements with a new property set appropriately for the root element</a></li>
<li class="level3"><a href="#honor-styles-on-elements-with-a-new-property-set-appropriately-for-pages">7.2. Honor styles on elements with a new property set appropriately for pages</a></li>
</ul>
</li>
<li class="level2"><a href="#control-the-suppression-via-color-profiles-or-similar">8. Control the suppression via color-profiles or similar</a></li>
</ul>
</li>
<li class="level1"><a href="#conclusions">Conclusions</a></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="plugin_note noteclassic">This was added to the <a href="https://www.w3.org/TR/css-color-adjust-1/" title="https://www.w3.org/TR/css-color-adjust-1/" rel="noopener">CSS Color Adjust Module</a>, as the &#039;print-color-adjust&#039; property.<h1 id="the-problem">The Problem</h1>
<p>
Non-white backgrounds are the same cost as white backgrounds on a computer screen, but are much more expensive when printed.  Most webpages aren&#039;t designed with printing in mind, and thus use far more non-white backgrounds than would be prudent in a printed page.  To help users, when sending a page to be printed all browsers suppress backgrounds (tweaking text colors at the same time to maintain contrast).  Some do more (IE9 suppresses box shadows as well), and there is more that can theoretically be done (for example, suppressing border-image).  Other types of devices (for example, AMOLED screens) may have their own unique economy of color, and may suppress or alter properties in a similar fashion.
</p>

<p>
Authors who prepare print versions often don’t to this with a print stylesheet, but with a alternate version of the document, linked to from the “normal”, screen version, but usually without appropriate <code>rel</code> attribute; these may even be PDFs and invoke the print dialog through scripting. 
</p>

<p>
Many browsers offer users the option to print backgrounds when the user decides that they&#039;re important, but this option is almost always hidden pretty deeply in the print UI.  Chrome doesn&#039;t offer an option at all.
</p>

<p>
Webkit is interested in finding some way for authors to provide a hint to the browser that they&#039;ve thought about printing, and their usage of color or images is prudent and useful to the user.
</p>

<p>
Whatever way is settled on, this should <strong>NOT</strong> take away the user&#039;s ability to still suppress backgrounds when they choose (or, for that matter, print all backgrounds when they choose).  It should just be a hint for the default behavior, absent any user choice to the contrary.
</p><h1 id="possible-solutions">Possible Solutions</h1><h2 id="do-nothing">1. Do nothing</h2>
<p>
Bert argues that this isn&#039;t an issue for <abbr title="Cascading Style Sheets">CSS</abbr> to worry about; it&#039;s solely a UI issue.  Browsers should do better at communicating with the user about their choices when printing, and the consequences of such.
</p>

<p>
As the conclusions section at the end notes, solutions 2-6 below are too polluted to use, and solution 7 is subject to future pollution. We already have a mechanism for expressing author intent for print (<code>media=print</code>) so it&#039;s up to the UI to present the user a way of determining whether that stylesheet is reasonable and meets their printing needs.
</p>
<hr />

<p>
No browser has yet found a decent way of communicating this.  It&#039;s not clear that most users would care even if great effort was spent on making it easy to see the consequences.  As such, it&#039;s still valuable for the author to provide the browser with hints about what&#039;s important on a page.
</p><h2 id="honor-any-style-present-in-any-print-stylesheet">2. Honor any style present in any print stylesheet</h2>
<p>
Simply do what <abbr title="Cascading Style Sheets">CSS</abbr> says to do - if a style applies during printing, apply it. This includes implicit print stylesheets, i.e. <code>media=all</code> which is the default.
</p>
<hr />

<p>
Stylesheets without an explicit media declaration default to a media of “all”, which means they apply when printing.  This is too polluted to use.
</p>

<p>
This option would mean a change in print behavior away from suppressed backgrounds by default.
</p><h2 id="honor-any-style-present-in-an-explicit-print-stylesheet">3. Honor any style present in an explicit print stylesheet</h2>
<p>
If the author has written a print stylesheet, they&#039;re indicating that they&#039;ve thought about printing.
</p>
<hr />

<p>
This is a non-trivial change to the meaning of media queries.  It&#039;s no longer a matching mechanism, but sometimes carries additional non-obvious meaning based on the precise value of the query.  “all” is no longer equivalent to “screen or print or …”.
</p>

<p>
A “print” stylesheet may be intended to combine with an “all” stylesheet.  Only honoring the styles in the “print” stylesheet (for the subset of properties that are suppressed by default) may produce inconsistent rendering.  Alternately, it may force authors to duplicate styles in both their “all” and “print” stylesheets.  Because the set of properties that may be altered is open-ended, this will either produce unintended rendering (if the author only copies over some of the suppressed properties, but not all) or result in the author just duplicating the entire stylesheet (or redundantly expressing the media query as “all or print”, if that successfully triggers the behavior). Changing the meaning of “all” to exclude “print” is not an option.
</p><h2 id="honor-any-style-if-there-is-an-explicit-print-stylesheet-present-on-the-page">4. Honor any style if there is an explicit print stylesheet present on the page</h2>
<p>
If the author has included an explicit print stylesheet, e.g. with <code>media=“print”</code>, they&#039;re indicating that they&#039;ve thought about printing, and so all their styles can be honored.
</p>
<hr />

<p>
Again, this is a non-trivial change to the meaning of media queries.
</p>

<p>
This signal is already hopelessly polluted.  Frameworks like HTML5Boilerplate include a print stylesheet by default.  Many template-driven sites include a print stylesheet in the template, but the authors of the page contents may not have thought about printing at all.
</p>

<p>
Also, this signal is incomplete. Authors may well have designed for print and only used <code>media=“screen”</code> to exclude certain properties from printing. This signal, however, is likely even more polluted than <code>media=“print”</code>.
</p><h3 id="honor-styles-whenwith-print-color-type-set">2.1., 3.1, 4.1 Honor styles when/with print color type set</h3>
<p>
The approaches relying on the media type being specified explicitly could be further restricted to <code>print and (color)</code> and <code>print and (monochrome)</code> where the latter is the default.
</p>
<hr />

<p>
The same objections as above apply, except there is much less existing content using “enhanced media types”, i.e. Media Queries.
</p><h2 id="honor-styles-marked-as-important">5. Honor styles marked as important</h2>
<p>
The <code>!important</code> flag on a rule indicates that the author feels the rule is important, and thus constitutes a useful signal that the style is important to preserve in printing.
</p>
<hr />

<p>
The <code>!important</code> flag has significant effects on the cascade.  This means that (a) the signal is likely already polluted by authors using it for ordinary cascade purposes, and (b) authors may end up needing to mark more rules than normal with <code>!important</code> to prevent the cascade effects causing other rules to be unintentionally overridden.
</p>

<p>
The set of properties which may be suppressed is open-ended, and already includes two with a likely third in the future.  Authors will either have to spam !important over every rule that might be suppressed, or deal with inconsistent rendering in browsers that suppress more than the author expected.
</p><h2 id="honor-styles-marked-as-printer-friendly">6. Honor styles marked as printer-friendly</h2>
<p>
Basically the same as #5, but mint a new flag for it to avoid the cascade effects that come from !important.
</p>
<hr />

<p>
The set of properties which may be suppressed is open-ended, and already includes two with a likely third in the future.  Authors will either have to spam !printer-friendly over every rule that might be suppressed, or deal with inconsistent rendering in browsers that suppress more than the author expected.
</p><h2 id="honor-styles-on-elements-with-a-new-property-set-appropriately">7. Honor styles on elements with a new property set appropriately</h2>
<p>
Allow authors to indicate that an element&#039;s styling is significant and appropriate for printing by specifying a new property on the element.
</p>

<p>
Here are several possible names for this property and its values:
</p>
<ul>
<li class="level1"><code>printer-friendly-colors: <em class="u">auto</em> | avoid</code></li>
<li class="level1"><code>printer-color-adjust: <em class="u">auto</em> | avoid</code></li>
<li class="level1"><code>printer-colors: <em class="u">auto</em> | exact</code></li>
<li class="level1"><code>color-adjust: <em class="u">economy</em> | exact</code></li>
<li class="level1"><code>conserve-ink: <em class="u">auto</em> | avoid</code></li>
<li class="level1"><code>expensive-colors: <em class="u">adjust</em> | exact</code></li>
</ul><h3 id="honor-styles-on-elements-with-a-new-property-set-appropriately-for-the-root-element">7.1. Honor styles on elements with a new property set appropriately for the root element</h3>
<p>
Limit #7 to only applying to <code>:root</code>.  This avoids the main implementation cost of new properties (more storage on every element).  It also potentially makes print dialog UIs simpler to comprehend.  Luke MacPherson from Google objects that there are good use-cases for being able to state that particular elements are important, while the rest of the page can be tweaked as necessary.  (For example, printing a webpage with a budget on it, and wanting to preserve the garish red background on the total debt figure.)
</p><h3 id="honor-styles-on-elements-with-a-new-property-set-appropriately-for-pages">7.2. Honor styles on elements with a new property set appropriately for pages</h3>
<p>
Make #7 an <code>@page</code> descriptor, rather than a property.  This gives us something halfway between global and per-element, where individual printed pages can declare themselves to have significant stuff that needs to be preserved.
</p>
<hr />

<p>
This property may end up being polluted by authors applying it too widely, such that browsers end up ignoring it again.
</p>

<p>
Several of the property names are clearly print-specific, while it would be nice to make this applicable to other devices with different display economies as well.
</p><h2 id="control-the-suppression-via-color-profiles-or-similar">8. Control the suppression via color-profiles or similar</h2>
<p>
Mikko Rantalainen suggests handling this through a color-profile mechanism, alongside other values that control how a device should adjust colors that it can&#039;t handle.
</p>
<hr />

<p>
This seems orthogonal to the other color-profile values.  Normally, color-profiles apply to <strong>all</strong> colors in the page, and dictate what to do when the device encounters a color that it can&#039;t render.  This feature instead applies to particular <strong>uses</strong> of color, and dictates what to do when the device encounters a color that it doesn&#039;t <strong>want</strong> to render.
</p>

<p>
Since the problem does not only affect colors, but also images, this would rather have to be a media-profile, device-profile or usecase-profile mechanism.
</p><h1 id="conclusions">Conclusions</h1>
<p>
Solutions 2, 3, 4, 5, and 6 seem unworkable due to pollution or other flaws.  Solution 8 seems unlikely to be the best answer to the problem.  Solution 1 seems incomplete; several people believe this is a useful semantic to express.  This leaves only some variant of solution 7.
</p>
</main>
</body>
</html>
