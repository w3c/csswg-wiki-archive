====== W3C CVS For Dummies ======

2010-234 Tantek Çelik - originally drafted (with incremental updates since)

===== Introduction =====
Setting up CVS and specifically, W3C's setup for CVS is quite challenging, obtuse, and painful.

Having failed to do this by myself, I took reasonably thorough notes while @fantasai and @davidbaron helped walk me through this setup, including trouble-shooting several problems I encountered along the way.

It is my hope that documenting the steps I had to take will help others get setup with CVS and editing W3C specs much more quickly and efficiently, and perhaps, in the long run, the process for editing W3C specifications can be made more efficient.

Tantek Çelik, 2010-236

===== Public Web Access to W3C CVS =====
If all you want to do is browse through W3C's CVS repository on the web, you can start here:

http://dev.w3.org/cvsweb/

However, if you want to actually *check out* W3C's CVS repository (with the intent to make changes), the instructions/info on that page is a bit too cryptic for most folks.

That's why this document is here.


===== Make Sure You Have =====
Before you get started with the setup steps, you need:
  - your W3C username - you need this for communicating with the W3C's CVS server
  - your public key - you need to setup SSH keys for yourself.
    * this might be helpful: [[https://developer.mozilla.org/en/Using_SSH_to_connect_to_CVS#Generating_an_SSH_key|Mozilla Developer Network: Generating an SSH key]]


===== Step 0 - Install CVS =====
You need to first install CVS on your system.

If you have a Mac - install XCode.  As long as you're using a fairly new OS X version (e.g. 10.6 Snow Leopard) and XCode, that should do it.

For other platforms ... tips forthcoming.


===== Step 1 - Setup CVS_RSH =====

W3C requires you to use SSH to connect to their CVS server.

What does this mean? It means W3C only allows secure access to the CVS server - and thus you must setup SSH on your machine to act as the conduit for CVS.

The short version, type this into a terminal window (e.g. in the Terminal application on MacOSX)

<code bash>export CVS_RSH=ssh</code>

You'll want to setup that up to happen automatically for you, and there are some instructions later for doing so.

Now test that you did the right thing by typing in:

<code bash>echo $CVS_RSH</code>

You should see a message like:

<code>ssh</code>

followed immediately by a prompt.

Here is another reference for setting up CVS to use SSH (though in practice I haven't found that I need it, and the instructions there seem cryptic too) https://developer.mozilla.org/en/Using_SSH_to_connect_to_CVS#Setting_up_CVS_to_use_SSH


===== How To Do Secure Checkouts That Allow You To Check In =====

  * go http://dev.w3.org/cvsweb/
  * copy the line that starts with:
    * ''CVSROOT=:pserver:anonymous@dev.w3.org:/sources/public''
    * copy the part after "CVSROOT="
  * change ''pserver'' to ''ext''
  * change ''anonymous'' to your W3C username

You should have something like:

'':ext:Tantekelik@dev.w3.org:/sources/public''

But with YOUR username instead of "Tantekelik" (used only as a placeholder in these examples)

Note that your W3C username is CASE-SENSITIVE, be sure to enter it precisely.

  * prefix it with "cvs -d" like this:
    * ''cvs -d :ext:Tantekelik@dev.w3.org:/sources/public''
  * put "co csswg" at the end like this:
    * ''cvs -d :ext:Tantekelik@dev.w3.org:/sources/public co csswg''
  * now use "cd" in your terminal/shell window/application to navigate to the directory where you want to create a new "csswg" directory.
  * execute this command in your shell (it will create a new directory called csswg)

<code bash>cvs -d :ext:tantekelik@dev.w3.org:/sources/public co csswg</code>

You might see a message like:

<code>
The authenticity of host 'dev.w3.org (128.30.52.19)' can't be established.
RSA key fingerprint is fb:30:ab:09:1c:b3:1a:74:93:67:57:fd:69:16:0b:97.
</code>

That's the right one. If you get a different fingerprint back you're being hacked.

Then when asked:

<code>Are you sure you want to continue connecting (yes/no)?</code>

Answer:

<code bash>yes</code>

Then you'll likely get a warning like:

<code>Warning: Permanently added 'dev.w3.org,128.30.52.19' (RSA) to the list of known hosts.</code>



IF you get an error message like

<code>Permission denied (publickey).</code>

FIRST check to make sure you typed in your username *case-sensitively* including proper capitals if any.

THEN if it still doesn't work, something is wrong with your public key setup. Email Bert Bos and ask him for help making sure your public key is setup correctly with W3C.


On Mac OS X (10.6) Terminal, you should get an alert dialog box that says:

<html><pre>
+-----------------------------------------------+
| Enter your password for the SSH key "id_dsa". |
|                                               |
|  Password: ________________________________   |
|                                               |
|                            (Cancel)  ((OK))   |
+-----------------------------------------------+
</pre></html>

Enter your SSH pass phrase that you used when you created the key and click OK.

On other OS's (or terminal/shell applications), you'll be prompted in some other way for pass phrase for your SSH key. Feel free to edit this and add OS-specific experiences/screenshots.


You may get a message like:

<code>Identity added: /Users/USERNAME/.ssh/id_dsa (/Users/USERNAME/.ssh/id_dsa)</code>

where USERNAME is your login alias for your client box.


IF you get an error message like:

<code>
Connection closed by 128.30.52.19
cvs [checkout aborted]: end of file from server (consult above messages if any)
</code>

THEN it could be a number of things. E.g.

  * you might have taken too long to enter your pass phrase in the previous step
    * try the previous step again, and promptly enter your pass phrase


You SHOULD see a message like:

<code>cvs.bin checkout: Updating csswg</code>

and then a bunch of messages like:

<code>
U csswg/.htaccess
U csswg/default.css
U csswg/logo-ED.png
cvs.bin checkout: Updating csswg/css-style-attr
U csswg/css-style-attr/Overview.html
U csswg/css-style-attr/Overview.src.html
U csswg/css-style-attr/issues-lc-2009.txt
</code>
...

etc.


CONGRATULATIONS!  

You now have a checkout of the ''csswg'' CVS repository.
 

==== Aside: Enabling BBEdit CVS Support ====

If you use the BBEdit text editor:

  * Go to the ''BBEdit'' menu
  * Choose ''Preferences...''
  * Click on ''Tools'' in the left column list of preference panes
  * Check ''|x| CVS Integration''
  * Click the ''(Save)'' button and close the ''BBEdit Preferences'' window.
  * Quit BBEdit and relaunch.

If you're running BBEdit 7.1.x you'll see a new "yellow diamond merge" menu icon between the ''#!'' and the script icon menu for performing operations on files that are part of a CVS checkout.

Feel free to add more specific info about other versions of BBEdit.

==== Aside: Other Editor CVS Support ====
Other windowing/GUI text editors may have their own ways of enabling CVS support.  Feel free to add documentation for those here in their own sections, named similarly to the previous section on ''Enabling BBEdit CVS Support''.
