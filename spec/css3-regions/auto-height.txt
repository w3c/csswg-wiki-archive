==== Regions: Processing Model for auto sizing ====

The regions specification proposes a model for handling auto sizing on regions. This page contains use cases 
that illustrate how this model is used concretely.

== Example A ==

<code>
<head>
<style>
#article {
    flow-into: article;
}

#regionA {
     width: auto;
     height: auto;
     flow-from: article;
}

</style>
</head>
<body>
<div id="article">…</div>
<div id="regionA"></div>
</body>

</code>

The intrinsic size of the regionA RFCB (RFCB-A) is computed as follows:

  - The intrinsic width of regionA's (RFCB-A) is the 'shrink-to-fit' (or 'fit-content') width of the '#article' element. This intrinsic
    height is not used in this case because the 'width' of the RFCB will follow the rules of the 
  - The intrinsic height of RFCB-A is resolved as follows:
        - Phase 1: layout the document with a 'used' height of 0 for RFCB-A. Because regionA is in the normal flow.
        - Phase 2: layout the 'article' named flow into regionA. Because regionA's height computed to 'auto', compute a new used height for 
          RFCB-A. Assuming there is no break in the content, the used height will 


  - Step A, Phase 1: layout regionA. regionA uses an intrinsic height of zero.
  - Step A, Phase 2: layout content in regions. When laying out regionA with height:auto: 
                      - compute the fragment that fits into the region (following fragmentation rules) in the specified width of 300ex.
                      - compute the intrinsic height of the region based on the fragment content
                      - freeze the intrinsic height ('Y') for regionB. **[QUESTION: what is regionB?]**
                      
Because there is a region with height:auto, a Step B is necessary. 

  - Step B, Phase 1: layout regionA. regionA uses an intrinsic height of 'Y'. 
  - Step B, Phase 2: layout content in region. 
          
== Example B - Edge Case B (from https://www.w3.org/Style/CSS/Tracker/actions/351) ==

<code>
   <div style="display:flexbox">
      <div id="region1" style="flow-from:x; flex:2"></div>
      <div id="region2" style="flow-from:x; flex:1"></div>
   </div>
</code>  

  - Step A, Phase 1: layout region1 and region2 using an intrinsic height of 0. 
  - Step A, Phase 2: layout content in regions. Because region1 has height:auto, 
                      - compute the fragment that fits into the region (following fragmentation rules). 
                      - compute the intrinsic height of the region based on the fragment content
                      - freeze the intrinsic height ('Y') for region1.
     Because region2 has height:auto:
                      - compute the fragment that fits into the region (following fragmentation rules). Depending on what the fragment rules determined fit into region1 there may not be content remaining in the flow. **[QUESTION: assuming no explicit breaks why would there be any content left from regions1? The intrinsic height will be simply all of the flow's content...]**
                      - compute the intrinsic height of the region based on the fragment content
                      - freeze the intrinsic height ('Z') for region2.
                      
Because there is a region with height:auto, a Step B is necessary. 

  - Step B, Phase 1: layout region1 and region2. region1 uses an intrinsic height of 'Y', region2 uses an intrinsic height of 'Z'. 
  - Step B, Phase 2: layout content in region. 
         
== Example C - Edge Case A (from https://www.w3.org/Style/CSS/Tracker/actions/351) ==
<code>
<style>
    #regionA {
        top: 0;
        bottom: 0;
        width: 100px;
        position: absolute;
        flow-from: article;
    }
    
    #regionB {
        flow-from: article;
        width: 200px;
        margin-left: 120px;
        top: 0;
        right: 0;
        position: absolute;
    }
    
    #article {
        flow-into: article;
    }
    
</style>

<div id="article">…</div>
<div id="container" style="position:relative">
    <div id="regionA"></div>
    <div id="regionB"></div>
</div>
</code>
**[OBSERVATION: If you follow the rules of CSS 2.1 ch 10. the used size of absolutely positioned elements with height: auto; top:0px; bottom: 0px; will be the height of the containing block minus MBP, thus, this problem is practically non-existent]**
  - Step A, Phase 1: layout regionA and regionB. regionB uses an intrinsic size of zero and, as a result, regionB's top and bottom compute to 0 and has a height of zero as well.
  - Step A, Phase 2: layout content in regions. When laying out regionB, because regionB has height:auto: 
                      - compute the fragment that fits into the region (following fragmentation rules). 
                      - compute the intrinsic height of the region based on the fragment content
                      - freeze the intrinsic height ('Y') for regionB.
                      
Because there is a region with height:auto, a Step B is necessary. 

  - Step B, Phase 1: layout regionA and regionB. regionB uses an intrinsic height of 'Y'. As a result, 
                     regionA's bottom property's used value is 'Y'.
  - Step B, Phase 2: layout content in region. The content will fit partially in regionA (because it has a narrower width)
                     but will not fill in regionB completely.
                     
                     
== Example D: Multi-column region with height:auto ==

<code>
<style>
#article {
   flow-into: article;
}

#regionA, #regionB {
   flow-from: article;
}

#regionA {
   height: auto;
   column-count: 2;
}

#regionB {
   height: auto;
   column-count: 2;
}
</style>

<div id="article">...</div>
<div id="regionA"></div>
<div id="regionB"></div>
</code>

  - Step A, Phase 1: layout regionA and regionB. Both use an intrinsic height of zero.
  - Step A, Phase 2: layout content in regions. When layout region A, because region A has height:auto:
                        - compute the fragment that fits into the region (following fragmentation rules).
                        - compute the intrinsic height of the region based on the fragment content
                        - freeze the intrinsic height ('Y') for region A. **[QUESTION: are you talking about 'used height' is all of these cases?]**
                      layout content in regionB as well, and because region B has height:auto
                        - compute the fragment that fits into the region,
                        - compute the intrinsic height of the region based on the fragment content
                        - freeze the intrinsic height ('Z') for region B.


  - Step B, Phase 1: layout regionA and regionB using the intrinsic heights of 'Y' and 'Z' respectively.
  - Step B, Phase 2: layout content in regionA and B.
                      